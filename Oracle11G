SELECT METADA FROM SYS.KOPM$; -- Verificando ambiente para saber quantos bits tem

/*
B023 = 32Bits
B047 = 64Bits
*/

-- Dicionario de Dados

Select* from dict; -- Ver o dicionario todo

-- Instancia Unica - RAC

Select PARALLEL from V$INSTANCE; -- Tudo que vier com v$ significa view

/*
A query acima esta perguntando se esta sendo usado paralelismo se a resposta for:
NO - Entao é instancia unico
YES - Entao não é instancia unica
*/

-- Estrutura de Memoria

SELECT COMPONENT, CURRENT_SIZE, MIN_SIZE, MAX_SIZE FROM V$SGA_DYNAMIC_COMPONENTS;

-- Conectando a outro Banco de Dados

SQLPLUS SYSTEM/SENHA@NOMEDOBANCO
ORACLE_SID=BANCO001


-- Nome do Banco para mostrar qual banco esta utilizando

SELECT NAME FROM V$DATABASE

/*
Armazenamnto
LÓGICO -> TABLESPACES -> SEGMENTOS(OBJETOS) -> EXTENSÕES(ESPAÇO) -> BLOCOS(DO SO)

FISICO -> DATAFILES
*/

-- NAO PODEMOS DETERMINAR EM QUAL ARQUIVO FISICO UM OBJETO FICARÁ

-- CRIANDO TABELA

CREATE TABLE cursos(
  ID_CURSO ITN PRIMARY KEY,
  NOME VARCHAR2(30),
  CARGA INT
)TABLESPACE USERS;

CREATE TABLE teste(
  ID_TESTE INT,
  NOME VARCHAR2(30)
);


SELECT TABLE_NAME, TABLESPACE_NAME
FROM USER_TABLES;

SELECT TABLE_NAME, TABLESPACE_NAME
FROM USER_TABLES
WHERE TABLE_NAME = 'cursos';

SELECT TABLE_NAME, TABLESPACE_NAME
FROM USER_TABLES
WHERE TABLE_NAME = 'teste';

-- Todo objeto é criado por padrao na tablespace user, exceto quando se esta logado com o usuario system, entao o objeto sera criado na tablespace system

SELECT SEGMENT_NAME, SEGMENT_TYPE, TABLESPACE_NAME, BYTES, BLOCKS, EXTENTS FROM SEGMENT_NAME;

SELECT SEGMENT_NAME, SEGMENT_TYPE, TABLESPACE_NAME, BYTES, BLOCKS, EXTENTS FROM USER_SEGMENT WHERE SEGMENT_NAME = 'cursos';

-- Fazendo Backup
/*
1- Criar uma pasta nova Data
2- CREATE TABLESPACE RECURSOS_HUMANOS
DATAFILE 'colocar caminho da pasta nova' ex: 'C:/DATA/RH_01.dbf
SIZE 100M AUTOEXTEND
ON NEXT 100M
MAXSIZE 4096M
*/


 -- Adicionando talespace
 
ALTER TABLESPACE NOME
ADD DATAFILE 'C:/DATA/RH_02.dbf
SIZE 200M AUTOEXTEND
ON NEXT 200M
MAXSIZE 4096M;

-- Verificando a tablespace no dicionario de dados

SELECT TABLESPACE_NAME, FILE_NAME FROM DBA_DATA_FILES;

-- SEQUENCE -sequence é uma coluna auto increment, mas a sequence nao faz parte da tabela e sim do banco de dados inteiro
-- DESSA FORMA O UMA TABELA CONTINUA A SEQUENCE DE OUTRA

CREATE SEQUENCE SEQ_GERAL
START WITH 100
INCREMENT BY 10;

 ex: tabela A 100, 120...
 Tabela B 110, 130...
 

-- Criando tabela na Tablespace

CREATE TABLE FUNCIONARIOS(
IDFUNCIONARIO INT PRIMARY KEY
NOME VARCHAR2(30) -- VARCHARE É IGUAL AO VARCHAR MAS POSSUI MAIS CAPACIDADE
)TABLESPACE RECURSOS_HUMANOS;

INSERT INTO FUNCIONARIOS VALUES(SEQ_GERAL.NEXTVAL, 'JOAO');
INSERT INTO FUNCIONARIOS VALUES(SEQ_GERAL.NEXTVAL, 'CAIO');
INSERT INTO FUNCIONARIOS VALUES(SEQ_GERAL.NEXTVAL, 'MARIA');

SELECT * FROM FUNCIONARIOS;

-- COMMIT É SALVAR TUDO O QUE FOPI FEITO


-- CRIANDO TABLESPACE DE MKT

ALTER TABLESPACE MKT
ADD DATAFILE 'C:/DATA/MKT_01.dbf'
SIZE 200M AUTOEXTEND
ON NEXT 200M
MAXSIZE 4096M;


CREATE TABLE CAMPANHAS(
IDCAMPANHA INT PRIMARY KEY
NOME VARCHAR2(30) -- VARCHARE É IGUAL AO VARCHAR MAS POSSUI MAIS CAPACIDADE
)TABLESPACE MKT;

INSERT INTO CAMPANHAS VALUES(SEQ_GERAL.NEXTVAL, 'PRIMAVERA');
INSERT INTO CAMPANHAS VALUES(SEQ_GERAL.NEXTVAL, 'VERAO');
INSERT INTO CAMPANHAS VALUES(SEQ_GERAL.NEXTVAL, 'INVERNO');

SELECT * FROM CAMPANHAS;

-- cOLOCANDO TABLESPACE OFFLINE

ALTER TABLE RECURSOS_HUMANOS OFFLINE;

-- APONTAR PARA DICIONARIO DE DADOS

ALTER TABLESPACE RECURSOS_HUMANOS 
RENAME DATAFILE 'C:/DATA/RH_01.dbf' TO 'C:/PRODUCAO/RH_01.dbf;

-- TORNANDO TABLESPACE ONLINE

ALTER TABLE RECURSOS_HUMANOS ONLINE;

















